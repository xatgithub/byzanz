2006-01-19  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzapplet.c: (byzanz_applet_update),
	(byzanz_applet_start_recording),
	(byzanz_applet_set_default_method),
	(byzanz_applet_method_selected_cb), (byzanz_applet_fill):
	  get rid of the label, it wastes space most of the time.
	  add tooltips
	* src/Makefile.am:
	* src/panelstuffer.h:
	* src/panelstuffer.c:
	  remove, they're not needed anymore

2006-01-19  Benjamin Otte  <otte@gnome.org>

	* src/screenshot-utils.c: (get_atom_property):
	  no more type-punned pointers breaking strict aliasing rules rules!

2006-01-19  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	* po/POTFILES.in:
	* po/de.po:
	* src/Makefile.am:
	* src/byzanz.schemas.in:
	* src/byzanzapplet.c: (pending_recording_launch),
	(byzanz_applet_stop_recording), (byzanz_applet_set_default_method),
	(byzanz_applet_method_selected_cb), (byzanz_applet_fill):
	* src/byzanzselect.c: (byzanz_select_method_get_name),
	(byzanz_select_method_lookup):
	* src/byzanzselect.h:
	  add support for GConf and store the save directory and selected
	  recording method in there. Does not do notifications (yet?).

2006-01-18  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzapplet.c: (byzanz_applet_start_recording):
	  set tmp_file so the applet thinks we're recording already
	* src/byzanzrecorder.c: (byzanz_recorder_new_fd),
	(byzanz_recorder_destroy):
	  ref/unref the GdkWindow
	* src/byzanzselect.c: (byzanz_select_area), (byzanz_select_screen),
	(select_window_button_pressed_cb), (byzanz_select_window):
	  document byzanz_select_method_select and make sure all methods ref
	  the window before returning

2006-01-18  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/Makefile.am:
	* src/byzanzselect.c: (select_window_button_pressed_cb),
	(byzanz_select_window):
	  add possibility to record a selected window.
	* data/Makefile.am:
	* data/byzanz-record-window.png:
	  and add icon for it
	* src/screenshot-utils.c: 
	* src/screenshot-utils.h:
	  partial copy from gnome-screenshot to find the correct window to
	  record

2006-01-17  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	* src/Makefile.am:
	* src/byzanzapplet.c: (byzanz_about_cb), (byzanz_applet_fill):
	* src/byzanzapplet.xml:
	  add a sexy about box
	* po/POTFILES.in:
	* po/de.po:
	  update translations for sexy about box

2006-01-17  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzselect.c: (quit_cb), (byzanz_select_area):
	  don't just sleep 1 sec, but run a main loop during that time

2006-01-17  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* Makefile.am:
	* configure.ac:
	* data/.cvsignore:
	* data/Makefile.am:
	* data/byzanz-record-area.png:
	* data/byzanz-record-screen.png:
	  add (rather stupid) icons for the different recording options
	* src/byzanzselect.c:
	  use them

2006-01-16  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	  add lots of warnings
	* gifenc/gifenc.c: (gifenc_open), (gifenc_dither_rgb),
	(gifenc_dither_rgb_with_full_image):
	* gifenc/quantize.c: (color_to_index), (gifenc_octree_add_color):
	* src/byzanzrecorder.c: (compute_image_size), (recorder_job_new),
	(stored_image_store):
	* src/panelstuffer.c: (panel_stuffer_find), (panel_stuffer_forall),
	(panel_stuffer_size_request):
	  fix all their errors

2006-01-16  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzapplet.c: (byzanz_applet_fill):
	  set panel that watches this applet
	* src/paneldropdown.c: (panel_dropdown_position_menu),
	(panel_dropdown_add), (panel_dropdown_remove),
	(panel_dropdown_size_allocate), (panel_dropdown_set_orientation),
	(panel_dropdown_parent_set), (panel_dropdown_class_init),
	(panel_dropdown_init), (panel_dropdown_deactivate_menu_cb),
	(panel_dropdown_set_popup_widget),
	(panel_dropdown_change_orient_cb), (panel_dropdown_set_applet):
	* src/paneldropdown.h:
	  add code to monitor size changes and adjust layout based on them.
	  Goal is (as always) to occupied space on the panel
	* src/paneltogglebutton.c: (panel_toggle_button_button_press),
	(panel_toggle_button_button_release):
	  don't react to mouse button 2 either (allow dragging the applet)

2006-01-16  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/paneltogglebutton.c: 
	* src/paneltogglebutton.h:
	  add toggle button subclass that fits better onto a panel

2006-01-16  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzselect.c: (byzanz_select_screen),
	(byzanz_select_method_get_icon_name):
	* src/byzanzselect.h:
	  add method for recodring the whole screen
	  supply a default icon name
	* src/Makefile.am:
	* src/paneldropdown.c: 
	* src/paneldropdown.h:
	  add a dropdown widget that drops down a menu when you click on it.
	  Supposed to be similar in spirit to GtkToolMenuItem.
	* src/byzanzapplet.c: (pending_recording_destroy),
	(byzanz_applet_update), (byzanz_applet_start_recording),
	(button_clicked_cb), (byzanz_applet_set_default_method),
	(byzanz_applet_method_selected_cb), (byzanz_applet_fill):
	  use the new widget and allow selecting a preferred recording method.

2006-01-13  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/record.c:
	  Update --help text to show default values for delay and duration so
	  people know that it can't be run indefinitely

2006-01-13  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* .cvsignore:
	* gifenc/.cvsignore:
	* macros/.cvsignore:
	* po/.cvsignore:
	* src/.cvsignore:
	  update

2006-01-13  Benjamin Otte  <otte@gnome.org>

	* README:
	  put important quote in there

2006-01-13  Benjamin Otte  <otte@gnome.org>

	* configure.ac:
	  0.0.3.1

==================== 0.0.2 ====================

2006-01-13  Benjamin Otte  <otte@gnome.org>

	* po/de.po:
	  update
	* NEWS:
	* configure.ac:
	  0.0.3

2006-01-13  Benjamin Otte  <otte@gnome.org>

	* configure.ac:
	  0.0.2.1

2006-01-12  Benjamin Otte  <otte@gnome.org>

	* src/byzanzapplet.c:
	  Use gnome-vfs to save the file. Fixes /tmp being on a different
	  partition issue everyone seems to have. Also allows you to save
	  directly to all gnome-vfs accounts.
	  Progress information is missing though.

2006-01-12  Benjamin Otte  <otte@gnome.org>

	* po/de.po:
	* src/byzanzapplet.c: (byzanz_applet_stop_recording):
	  tweak string displayed and translate it.

==================== 0.0.2 ====================

2006-01-12  Benjamin Otte  <otte@gnome.org>

	* src/byzanzapplet.c: (byzanz_applet_show_error),
	(byzanz_applet_stop_recording):
	  show an error if the file can not be properly renamed.
	  First attempt at error displays. (And yes, it's stil 0.0.2 in here)

2006-01-12  Benjamin Otte  <otte@gnome.org>

	* NEWS:
	  update (create?)
	* configure.ac:
	  0.0.2

2006-01-12  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* gifenc/gifenc.c: (gifenc_dither_rgb_with_full_image):
	* gifenc/gifenc.h:
	  remove old test code that wouldn't compile anymore. Comment out a
	  print debugging statement.  
	* gifenc/gifenc.c: (gifenc_dither_rgb),
	(gifenc_dither_rgb_with_full_image):
	* gifenc/gifenc.h:
	* gifenc/quantize.c: (gifenc_palette_simple_lookup),
	(gifenc_octree_add_one), (gifenc_octree_add_color),
	(gifenc_octree_lookup), (gifenc_quantize_image):
	  make pixel values guint32 instead of guint. Should help with 64bit
	  CPUs in theor, but I don't have one.

2006-01-12  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* gifenc/gifenc.c: (gifenc_write), (gifenc_write_string),
	(gifenc_write_uint16), (gifenc_write_byte),
	(gifenc_write_color_table), (gifenc_buffer_write),
	(gifenc_write_loop):
	* gifenc/gifenc.h:
	* gifenc/quantize.c: (gifenc_palette_get_color),
	(gifenc_palette_get_simple), (gifenc_octree_finalize),
	(gifenc_quantize_image):
	  add a colors array to the palette struct which contains
	  all the colors. This allows easy color lookup by index.
	  It also makes writing the palette to the GIF the same for
	  all palettes.
	* src/byzanzselect.c: (realize_cb):
	  set transparent background

2006-01-11  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* gifenc/gifenc.c: (gifenc_dither_pixbuf), (gifenc_dither_rgb),
	(gifenc_dither_rgb_with_full_image):
	* gifenc/gifenc.h:
	  - add gifenc_dither_rgb_with_full_image
	  - remove gifenc_dither_rgb
	  - rename gifenc_dither_rgb_into to gifenc_dither_rgb
	* src/byzanzrecorder.c: (recorder_job_new),
	(byzanz_recorder_dither_region), (byzanz_recorder_add_image),
	(stored_image_process), (byzanz_recorder_run_encoder),
	(byzanz_recorder_filter_damage_event):
	  use gifenc_dither_rgb_with_full_image in the hope that this
	  produces smaller files

2006-01-11  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzrecorder.c: (recorder_job_new),
	(byzanz_recorder_filter_damage_event), (byzanz_recorder_new_fd),
	(byzanz_recorder_destroy):
	  reordering of XDamage interfacing to only subtract damage when
	  reading out the window contents

2006-01-11  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* gifenc/quantize.c: (gifenc_octree_add_one),
	(gifenc_octree_add_color), (gifenc_quantize_image):
	  change quantization to have evenly spaced base colors
	* src/byzanzrecorder.c: (byzanz_recorder_run_encoder),
	(byzanz_recorder_new_fd), (byzanz_recorder_is_active):
	* src/byzanzrecorder.h:
	  add function to query if the recorder is still encoding after having
	  stopped.
	* src/byzanzapplet.c: (byzanz_applet_destroy_recorder),
	(byzanz_applet_is_recording), (byzanz_applet_ensure_text),
	(byzanz_applet_update), (byzanz_applet_start_recording),
	(byzanz_applet_stop_recording), (destroy_applet):
	  change so that encoding can happen in the background even after the
	  recording has been saved already.
	  Also update the code structurre to better deal with UI updates.

2006-01-10  Benjamin Otte  <otte@gnome.org>

	* src/byzanzrecorder.c: (byzanz_recorder_queue_image),
	(byzanz_recorder_filter_damage_event), (byzanz_recorder_new_fd),
	(byzanz_recorder_destroy):
	  subtract damaged regions the moment we get the event that they're
	  damaged. Might increase traffic but otherwise we'd lose areas we'd
	  need to refetch

2006-01-10  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* gifenc/gifenc.h:
	* gifenc/quantize.c: (gifenc_palette_get_num_colors):
	  add function to get number of colors
	* gifenc/gifenc.c: (gifenc_write_lsd), (gifenc_write_color_table),
	(gifenc_write_image_description), (gifenc_write_image_data):
	  use gifenc_palette_get_num_colors instead of (often wrongly)
	  calculating the number of colors itself

2006-01-10  Benjamin Otte  <otte@gnome.org>

	* src/byzanzrecorder.c: (recorder_job_new):
	  That should have been g_async_queue_push_unlocked from the start.
	  Wonder why that didn't matter on PPC.

2006-01-10  Benjamin Otte  <otte@gnome.org>

	* gifenc/quantize.c: (gifenc_octree_write):
	  fix writeout on little endian.
	* src/byzanzselect.c: (expose_cb), (button_pressed_cb),
	(byzanz_select_area):
	  remove leftover g_print stuff and really work without Composite

2006-01-10  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* macros/Makefile.am:
	  this file survived quite a while without being added to CVS

2006-01-10  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzrecorder.c: (recorder_job_new):
	  push the NEED_FILE_CACHE event to the front, so the encoding thread
	  starts putting stuff into the file NOW
	* src/byzanzselect.c: (expose_cb), (realize_cb),
	(byzanz_select_area):
	  add experimental code for non-composite X

2006-01-10  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	* po/es.po:
	  add Spanish translation by Antonio Ognio

2006-01-10  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	  version 0.0.1.1
	* src/Makefile.am:
	  rename the binary from "record" to "byzanz-record"
	* src/byzanzapplet.c: (byzanz_applet_stop_recording):
	  set default button
	* src/byzanzrecorder.c: (recorder_job_new),
	(byzanz_recorder_dither_region), (byzanz_recorder_add_image),
	(stored_image_remove_file), (stored_image_store),
	(stored_image_dither_get_data), (stored_image_process),
	(byzanz_recorder_quantize), (byzanz_recorder_encode_get_data),
	(byzanz_recorder_encode), (byzanz_recorder_run_encoder),
	(byzanz_recorder_new_fd):
	  implement a file cache that gets triggered when too much data has
	  built up. This is done completely inside the encoding thread.
	  Byzanz can almost realtime-encode small movie windows now.
	* src/byzanzselect.c: (expose_cb), (button_pressed_cb),
	(button_released_cb), (motion_notify_cb):
	  random fixes so you can really select the whole screen and
	  the selected area is drawn correctly

==================== 0.0.1 ====================

2006-01-08  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	  release version 0.0.1

2006-01-08  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	* po/POTFILES.in:
	  Fixes so translation works now. make distcheck passes.
	* po/de.po:
	  update

2006-01-08  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzapplet.c: (byzanz_applet_start_recording),
	(byzanz_applet_stop_recording):
	  record to temp file and then allow the user to save it to where
	  he wants

2006-01-08  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/Makefile.am:
	  include gifenc dir, the i18n.h file is there
	* gifenc/gifenc.c: (gifenc_open), (gifenc_open_fd):
	* gifenc/gifenc.h:
	  change gifenc_open function argument order, add gifenc_open_fd
	* src/byzanzapplet.c: (byzanz_applet_start_recording):
	* src/byzanzrecorder.c: (byzanz_recorder_new),
	(byzanz_recorder_new_fd):
	* src/byzanzrecorder.h:
	* src/record.c: (main):
	  make byzanz_recorder_new take a GdkRectangle as area, add
	  byzanz_recorder_new_fd

2006-01-08  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	  correctly check for XDamage
	* src/byzanzrecorder.c: (byzanz_recorder_new):
	* src/byzanzrecorder.h:
	* src/record.c: (main):
	  adapt byzanz_recorder_new so it takes a GdkWindow to record
	* src/Makefile.am:
	* src/byzanzselect.c:
	* src/byzanzselect.h:
	  add code for doing selections of desktop areas
	* src/byzanzapplet.c: (byzanz_applet_start_recording),
	(byzanz_applet_fill):
	  use new selection mechanism

2006-01-06  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzrecorder.c: (byzanz_recorder_filter_damage_event):
	  only start image encoding routine if there is something to encode

2006-01-06  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/Makefile.am:
	* src/panelstuffer.c:
	* src/panelstuffer.h:
	  added PanelStuffer from battstat applet patch. Added function to
	  automaticaclly track orientation changes if parent is an applet.
	* src/byzanzapplet.c: (byzanz_applet_update),
	(byzanz_applet_is_recording), (byzanz_applet_start_recording),
	(byzanz_applet_stop_recording), (button_clicked_cb),
	(destroy_applet), (byzanz_applet_fill):
	  add a funky label counting the elapsed time
	* src/byzanzrecorder.c: (byzanz_recorder_idle_cb),
	(byzanz_recorder_filter_damage_event):
	  use a different callback in idle and timeout functions

2006-01-06  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzapplet.c: (button_clicked_cb), (byzanz_applet_fill):
	  use a togglebutton to record (it's still a very simple applet ;))
	* src/byzanzrecorder.c: (compute_image_size), (recorder_job_free),
	(recorder_job_new), (byzanz_recorder_run_encoder),
	(byzanz_recorder_destroy), (byzanz_recorder_queue_image), 
	(byzanz_recorder_set_max_cache), (byzanz_recorder_get_max_cache),
	(byzanz_recorder_get_cache):
	* src/byzanzrecorder.h:
	  monitor memory usage of cache to avoid eating all memory
	* src/byzanzrecorder.c: (byzanz_recorder_start),
	(byzanz_recorder_new):
	  create the Damage object when starting - that way we can do all
	  drawing based on Damage events and avoid drawing the whole screen
	  twice at the start.

2006-01-06  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* Makefile.am:
	* autogen.sh:
	* configure.ac:
	* macros/ac-define-dir.m4:
	* macros/as-ac-expand.m4:
	* macros/as-compiler-flag.m4:
	* macros/as-scrub-include.m4:
	* macros/as-version.m4:
	* po/LINGUAS:
	* po/POTFILES.in:
	* po/de.po:
	* src/Makefile.am:
	  update this whole mess to use gnome-autogen instead of the GStreamer
	  common/ thingy.
	* src/ByzanzApplet.server.in.in:
	* src/byzanzapplet.c: (button_clicked_cb), (destroy_applet),
	(byzanz_applet_fill):
	  add a first approach at a recording applet

2006-01-06  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* src/byzanzrecorder.c: (byzanz_recorder_filter_damage_event):
	  do not immediately process a long-awaited damage event, but try to
	  process multiple Damage events by registering an idle function

2006-01-05  Benjamin Otte  <in7y118@public.uni-hamburg.de>

	* configure.ac:
	  check for gthread-2.0 for the app
	* gifenc/gifenc.c: (gifenc_close):
	* gifenc/gifenc.h:
	  make gifenc_close return a boolean to indicate successful creation
	  of a file. (Currently always returns TRUE)
	* gifenc/quantize.c: (gifenc_quantize_image):
	  comment out last print statement
	* po/de.po:
	  update
	* src/Makefile.am:
	* src/byzanzrecorder.c: 
	* src/byzanzrecorder.h:
	  add these 2 files and split out the recording functionality in them.
	* src/record.c: (verbose_print), (usage), (stop_recording),
	(start_recording), (prepare_recording), (main):
	  use ByzanzRecorder and a main loop.

2006-01-05  Benjamin Otte  <otte@gnome.org>

	initial import
